{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Homelab","text":"<pre><code>homelab:\n  hardware:\n    device: \"ASUS TUF Gaming F17\"\n    processor: \"Intel i5-11400H (12) @ 4.500GHz\"\n    ram: \"16GB\"\n    storage: \"512GB SSD\"\n    gpu: \"Nvidia RTX 3050\"\n    vram: \"4GB\"\n    virtualization: \"Docker\"\n  system:\n    os: \"Arch Linux x86_64\"\n  kubernetes:\n    distribution: \"k3s\"\n    git_ops: \"FluxCD\"\n    setup: \"Single-node cluster\"\n    tools:\n      - \"Traefik for ingress management\"\n      - \"FluxCD for continuous delivery\"\n    network:\n      ingress: \"Local, not exposed to the internet\"\n  services:\n    - name: \"Linkding\"\n      purpose: \"Bookmark management\"\n</code></pre>"},{"location":"Setup/cluster-setup/","title":"Cluster Setup","text":"<p>To create a single node cluster, we can use K3s. K3s is a lightweight Kubernetes distribution which makes it perfect for homelab. The official guide on installing K3s is really straight-forward. One can simply run the following command.</p> <pre><code>curl -sfL https://get.k3s.io | sh -\n</code></pre> <p>This will be enough for most people but not me. For that, I need to explain my server partition and volume.</p> <pre><code>lsblk -o NAME,SIZE,TYPE\nNAME                SIZE TYPE\nnvme0n1           476.9G disk\n\u251c\u2500nvme0n1p1           1G part\n\u2514\u2500nvme0n1p2       475.9G part\n  \u2514\u2500quasar        475.9G crypt\n    \u251c\u2500quasar-swap    16G lvm\n    \u251c\u2500quasar-root    32G lvm\n    \u251c\u2500quasar-home   200G lvm\n    \u2514\u2500quasar-data   200G lvm\n</code></pre> <p>There are two partitions within my SSD. One partition is reserved for the <code>/boot</code> and the rest is for the <code>/root</code>, <code>/home</code> and <code>/data</code> mounts.</p> <p>The Arch wiki suggests that 15-20 GiB should be sufficient for the <code>/root</code> volume. So, after creating that, I have distributed the rest into two separate volumes. I created <code>/data</code> directory to store data. I want to use this path to store all persistent volumes of my K3s cluster.</p> <p>Therefore, I decided to modify it by adjusting the flag when I first installed K3s.</p> <pre><code>sudo mkdir -p /data/k3s-volumes\nsudo chown -R root:root /data/k3s-volumes\ncurl -sfL https://get.k3s.io | sh -s - --default-local-storage-path /data/k3s-volumes\n</code></pre>"}]}